# 玩家角色更新说明

## 更新内容

### 1. 角色替换
- **旧角色**: 猫咪 (cat.py)
- **新角色**: 弓箭手 (player.py)
- **角色资源**: `assets/character/` 目录下的动画资源

### 2. 新增滑行技能

#### 滑行功能特性:
- **触发按键**: 向下箭头键 (↓)
- **持续时间**: 0.5秒 (30帧)
- **冷却时间**: 1.5秒 (90帧)
- **特殊效果**: 
  - 滑行时角色碰撞箱高度减半
  - 可以躲避高处的障碍物
  - 滑行时无法跳跃

#### HUD显示:
- **滑行中**: 显示绿色 "SLIDING" 提示
- **冷却中**: 显示灰色倒计时和进度条
- **位置**: 血条下方,护盾图标左侧

### 3. 动画系统

#### 已实现的动画:
- **待机动画** (Idle): 开始界面显示
- **跑步动画** (Running): 地面移动时
- **跳跃动画** (Jump Start): 空中状态
- **滑行动画** (Sliding): 滑行技能
- **受伤动画** (Hurt): 预留接口

#### 动画播放速度:
- 动画索引增长速度: 0.15/帧
- 自动循环播放

### 4. 文件变更

#### 新增文件:
- `player.py` - 新的玩家角色类

#### 修改文件:
- `ATripHome.py` - 导入Player类,添加滑行按键处理
- `settings.py` - 添加滑行相关设置
- `hud.py` - 添加滑行冷却显示

#### 保留文件:
- `cat.py` - 保留用于兼容性(可选删除)

### 5. 配置参数 (settings.py)

```python
# 角色尺寸
PLAYER_WIDTH = 162
PLAYER_HEIGHT = 200

# 滑行设置
SLIDE_DURATION = 30      # 滑行持续时间(帧)
SLIDE_COOLDOWN = 90      # 滑行冷却时间(帧)
SLIDE_KEY = pg.K_DOWN    # 滑行按键
```

### 6. 碰撞检测优化

- **正常状态**: 使用0.7倍碰撞箱比例
- **滑行状态**: 使用0.5倍碰撞箱比例
- 滑行时更容易躲避障碍物

### 7. 兼容性说明

- 保持了与原猫咪角色相同的接口
- `cat` 变量名保留,但实际为Player实例
- 所有原有功能(跳跃、超级跳跃等)继续工作

## 使用方法

### 基本操作:
1. **打字跳跃**: 正确输入单词中的字母触发跳跃
2. **滑行**: 按向下箭头键(↓)触发滑行
3. **超级跳跃**: 连续完成3次跳跃后,下一次跳跃为超级跳跃

### 游戏策略:
- 使用滑行躲避低矮或高处的障碍物
- 注意滑行冷却时间,合理安排使用时机
- 滑行中无法跳跃,需要等待滑行结束

## 技术细节

### Player类主要方法:
- `__init__()` - 初始化角色和动画
- `_load_animations()` - 加载所有动画帧
- `start_jump()` - 处理跳跃逻辑
- `start_slide()` - 处理滑行逻辑
- `animation()` - 根据状态播放对应动画
- `update()` - 每帧更新

### 动画加载逻辑:
1. 从`assets/character/`对应文件夹加载PNG文件
2. 按文件名排序确保动画顺序正确
3. 缩放到指定尺寸
4. 失败时使用备用动画避免崩溃

## 故障排除

### 常见问题:

1. **角色不显示动画**
   - 检查`assets/character/`路径是否正确
   - 确认各动画文件夹中有PNG文件

2. **滑行不生效**
   - 确认不在冷却期间
   - 确认角色在地面上(不在空中)
   - 检查按键设置是否正确

3. **性能问题**
   - 动画文件数量较多可能影响加载速度
   - 考虑优化图片尺寸

## 未来扩展

可以考虑添加:
- 更多技能(如冲刺、二段跳)
- 更多角色动画状态
- 角色选择系统
- 技能升级系统
